<!-- This example will demonstare converting a basic URL with pid and campaign to OneLink URL -->
<!-- The calling URL should be: https://liaz-af.github.io/af-onelink-smart-script/examples/utm_params.html?utm_source=email&utm_campaign=summer_sale -->
<!-- The expected OneLink URL: 
     https://engmntqa.onelink.me/LtRd/?pid=email&c=summer_sale&af_js_web=true -->

<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="wrapper">
    <div class="row">
      <div class="column">
        <img src="./images/appsflyerlogo.png" alt="AppsFlyer logo">
      </div>
      <div class="column" style="text-align:right;">
        <img src="./images/onelinklogo.png" alt="OneLink logo">
      </div>
    </div>

    <h1>
      Demo
    </h1>

    <div class="stores-wrapper">
      <a id="ios_link" href="https://apps.apple.com/app/id1496877823">
        <div class="storebox">
          <img src="./images/app_store.png" alt="app store link">
        </div>
      </a>

      <a id="andrd_link" href="https://play.google.com/store/apps/details?id=com.arriva.bus">
        <div class="storebox">
          <img src="./images/play_store.png" alt="play store link">
        </div>
      </a>
    </div>

    <h2 id="input_url" class="present_url">
      No input URL
    </h2>

    <h2 id="output_url" class="present_url">
      No output from script
    </h2>
  </div>

  <script type="text/javascript" src="./scripts/onelink-smart-script.js"></script>
  <script type="text/javascript">
    window.onload = function () {
      document.getElementById('input_url').innerHTML = window.location.href;

      // config appsflyer
      const onelinkGenerator = new window.AF.OneLinkUrlGenerator({
        oneLinkURL: "https://aukb.onelink.me/SHza/",
        pidKeysList: ['utm_source','pid','pidtest'],
        campaignKeysList: ['utm_campaign','c','ctest']
      });
      //onelinkGenerator.setChannel();
      //onelinkGenerator.setChannel("af_channel_outgoing", "default_channel");
         
      onelinkGenerator.setChannel("af_channel", "default"); 
      onelinkGenerator.setAdset("af_adset", "default"); 
      onelinkGenerator.setAd("af_ad", "default");
      onelinkGenerator.setCustomParameter("af_c_id", "af_c_id");
      //onelinkGenerator.setCustomParameter("af_c_id","af_c_id","default"); 
         
      //onelinkGenerator.setCustomParameter("af_os", "af_os","af_os_default");
      //onelinkGenerator.setCustomParameter("af_test", "af_test","af_test_default");

         
      // generate url
      const url = onelinkGenerator.generateUrl();

      // onelink is generated
      if (url) {
        document.getElementById('andrd_link').setAttribute('href', url);
        document.getElementById('ios_link').setAttribute('href', url);
        document.getElementById('output_url').innerHTML = url;
      }
    };
  </script>
</body>

</html>
