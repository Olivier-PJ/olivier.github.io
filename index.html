<!-- This example will demonstare converting a basic URL with pid and campaign to OneLink URL -->
<!-- The calling URL should be: https://liaz-af.github.io/af-onelink-smart-script/examples/utm_params.html?utm_source=email&utm_campaign=summer_sale -->
<!-- The expected OneLink URL: 
     https://engmntqa.onelink.me/LtRd/?pid=email&c=summer_sale&af_js_web=true -->

<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="style.css">
  <!--<script>
                   !function(e,n,t,s,a,r,c,o,i){e.AppsFlyerSdkObject="AF",e.AF=e.AF||function(){(e.AF.q=e.AF.q||[]).push([Date.now()].concat(Array.prototype.slice.call(arguments)))},e.AF.id=e.AF.id||c,e.AF.plugins={},o=n.createElement(t),i=n.getElementsByTagName(t)[0],o.async=1,o.src="https://websdk.appsflyer.com?"+(r.length>0?"st="+r.split(",").sort().join(",")+"&":"")+(c.length>0?"af_id="+c:""),i.parentNode.insertBefore(o,i)}(window,document,"script",0,0,"banners",{banners:{key:"daa8ff10-6c22-4ef5-8637-9d79835bf95c"}}),AF("banners","showBanner") 
  </script>-->
</head>

<body>
    <h1>
      Test top
    </h1>
  <div class="wrapper">
    <div class="row">
      <div class="column">
        <img src="./images/appsflyerlogo.png" alt="AppsFlyer logo">
      </div>
      <div class="column" style="text-align:right;">
        <img src="./images/onelinklogo.png" alt="OneLink logo">
      </div>
    </div>

    <h1>
      Demo
    </h1>

    <div class="stores-wrapper">
      <a id="ios_link" href="https://apps.apple.com/app/id1496877823">
        <div class="storebox">
          <img src="./images/app_store.png" alt="app store link">
        </div>
      </a>

      <a id="andrd_link" href="https://moovitapp.com/index/api/onelink/3986059930?pid=Web_SEO_Destination&amp;af_web_dp=https%3A%2F%2Fmoovit.com%2Fpayment-public-transport-en&amp;c=Banner&amp;is_retargeting=true&amp;af_click_lookback=7d&amp;af_dp=moovit%3A%2F%2Fmot_registration&amp;deep_link_value=moovit%3A%2F%2Fmot_registration&amp;af_reengagement_window=7d&amp;&amp;deep_link_sub1=1&amp;GACP=v%3D1%26t%3Devent%26tid%3DUA-36954272-1%26cid%3DGACP_PARAM_CLIENT_ID%26ec%3Doffline%26ea%3Dinstall%26el%3DGACP_PARAM_USER_AGENT%26cd7%3Den%26cd8%3DSEO%26cd11%3DSEO%2520landing%2520pages%26cd22%3DDestinations%26cd30%3DGACP_PARAM_CLIENT_ID%26cd1%3DIsrael%26cd2%3DIsrael%26cd49%3D13%252C854820" target="_top">
        <div class="storebox">
          <img src="./images/play_store.png" alt="play store link">
        </div>
      </a>
    </div>

    <h2 id="input_url" class="present_url">
      No input URL
    </h2>

    <h2 id="output_url" class="present_url">
      No output from script
    </h2>
  </div>

  <script type="text/javascript" src="./scripts/onelink-smart-script.js"></script>
  <script type="text/javascript">
    /*window.onload = function () {
      document.getElementById('input_url').innerHTML = window.location.href;

      // config appsflyer
      const onelinkGenerator = new window.AF.OneLinkUrlGenerator({
        oneLinkURL: "https://aukb.onelink.me/SHza/",
        pidKeysList: ['utm_source','af_pid','pidtest'],
        pidStaticValue: 'User_invite',
        campaignKeysList: ['utm_campaign','c','ctest']
      });
      //onelinkGenerator.setChannel();
      //onelinkGenerator.setChannel("af_channel_outgoing", "default_channel");
         
      onelinkGenerator.setChannel("af_channel", "default"); 
      onelinkGenerator.setAdset("af_adset", "default"); 
      onelinkGenerator.setAd("af_ad", "default");
      onelinkGenerator.setCustomParameter("af_c_id", "af_c_id");
      //onelinkGenerator.setCustomParameter("af_c_id","af_c_id","default"); 
         
      //onelinkGenerator.setCustomParameter("af_os", "af_os","af_os_default");
      //onelinkGenerator.setCustomParameter("af_test", "af_test","af_test_default");

         
      // generate url
      const url = onelinkGenerator.generateUrl();

      // onelink is generated
      if (url) {
        document.getElementById('andrd_link').setAttribute('href', url);
        document.getElementById('ios_link').setAttribute('href', url);
        document.getElementById('output_url').innerHTML = url;
      }
    };*/
  </script>
</body>

</html>
